<!DOCTYPE HTML>
<html>
  <head>
    <title>hello world</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js" charset="utf-8"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <style type='text/css'>
      circle{
      r:10;
      fill:rgba(255,0,0,.9);
      }

      line{
      stroke:rgba(10,10,10,.5);
      stroke-width:3;
      }
    </style>
  </head>
  <body>
      
      <script>

	var dataset = [1,2,3,4,5];

	height = 300
	width = 300

	var svg = d3.select('body').append('svg')
	.style('width',width)
	.style('height',height)


	var popped = dataset.pop();
	console.log(dataset);

	svg.selectAll('line')
	.data(dataset)
	.enter()
	.append('line')
	.attr('x1', function(d){
	    return 10+d*50;
	    })
	.attr('y1',height/2)
	.attr('x2', function(d){
	    return 10+(d+1)*50;
	    })
	.attr('y2',height/2);

	dataset.push(popped);

	svg.selectAll('circle')
	.data(dataset)
	.enter()
	.append('circle')
	.attr('cx', function(d){
	    return 10+d*50;
	    })
	.attr('cy',height/2);

	d3.select('body').append('p').text('hello world');

	var toggle = {
	    index : 0,
	    buttontxts : ["push me!","pushed"],
	    flip : function(){ 
	         this.index = this.index+1;
	         return this.buttontxts[(this.index) % this.buttontxts.length]}
	}

	button = d3.select('body').append('button').text('push me!');
	$('button').on('click',function(){this.textContent=toggle.flip(); return})

	svg.selectAll('circle')
	.on('mouseover',function(){d3.select(this).style('fill','blue'); return;})
	.on('mouseout',function(){d3.select(this).style('fill','red'); return;})

	//experimenting with objects

	var Node = function(name,cx,cy){
	    this.name = name;
	    this.cx = cx;
	    this.cy = cy;
	    };

	var Edge = function(name,startNode,endNode){
	    try{startNode instanceof Node == True}
	    catch(error){throw new Error("startNode must be an instance of Node")};

	    this.name = name;
	    this.startNode = startNode;
	    this.endNode = endNode;
	    this.x1 = startNode.cx;
	    this.y1 = startNode.cy;
	    this.x2 = endNode.cx;
	    this.y2 = endNode.cy;
	}
	
	var n1 = new Node('n1','150','100');
	var n2 = new Node('n2','150','50');
	var e1 = new Edge('e1', n1, n2);
	
	svg.append('circle')
	.attr('cx', n1.cx)
	.attr('cy', n1.cy);

	svg.append('circle')
	.attr('cx', n2.cx)
	.attr('cy', n2.cy);

	svg.append('line')
	.attr('x1', e1.x1)
	.attr('y1', e1.y1)
	.attr('x2', e1.x2)
	.attr('y2', e1.y2);

      </script>
  </body>
</html>
